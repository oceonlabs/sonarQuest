{"version":3,"file":"routes-manifest-plugin.js","sources":["../../../../src/start-router-plugin/generator-plugins/routes-manifest-plugin.ts"],"sourcesContent":["import { rootRouteId } from '@tanstack/router-core'\n\nimport type { GeneratorPlugin } from '@tanstack/router-generator'\n\n/**\n * this plugin builds the routes manifest and stores it on globalThis\n * so that it can be accessed later (e.g. from a vite plugin)\n */\nexport function routesManifestPlugin(): GeneratorPlugin {\n  return {\n    name: 'routes-manifest-plugin',\n    onRouteTreeChanged: ({ routeTree, rootRouteNode, routeNodes }) => {\n      const routesManifest = {\n        [rootRouteId]: {\n          filePath: rootRouteNode.fullPath,\n          children: routeTree.map((d) => d.routePath),\n        },\n        ...Object.fromEntries(\n          routeNodes.map((d) => {\n            const filePathId = d.routePath\n\n            return [\n              filePathId,\n              {\n                filePath: d.fullPath,\n                parent: d.parent?.routePath ? d.parent.routePath : undefined,\n                children: d.children?.map((childRoute) => childRoute.routePath),\n              },\n            ]\n          }),\n        ),\n      }\n\n      globalThis.TSS_ROUTES_MANIFEST = { routes: routesManifest }\n    },\n  }\n}\n"],"names":[],"mappings":";AAQO,SAAS,uBAAwC;AACtD,SAAO;AAAA,IACL,MAAM;AAAA,IACN,oBAAoB,CAAC,EAAE,WAAW,eAAe,iBAAiB;AAChE,YAAM,iBAAiB;AAAA,QACrB,CAAC,WAAW,GAAG;AAAA,UACb,UAAU,cAAc;AAAA,UACxB,UAAU,UAAU,IAAI,CAAC,MAAM,EAAE,SAAS;AAAA,QAAA;AAAA,QAE5C,GAAG,OAAO;AAAA,UACR,WAAW,IAAI,CAAC,MAAM;AACpB,kBAAM,aAAa,EAAE;AAErB,mBAAO;AAAA,cACL;AAAA,cACA;AAAA,gBACE,UAAU,EAAE;AAAA,gBACZ,QAAQ,EAAE,QAAQ,YAAY,EAAE,OAAO,YAAY;AAAA,gBACnD,UAAU,EAAE,UAAU,IAAI,CAAC,eAAe,WAAW,SAAS;AAAA,cAAA;AAAA,YAChE;AAAA,UAEJ,CAAC;AAAA,QAAA;AAAA,MACH;AAGF,iBAAW,sBAAsB,EAAE,QAAQ,eAAA;AAAA,IAC7C;AAAA,EAAA;AAEJ;"}