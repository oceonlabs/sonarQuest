{"version":3,"file":"getServerFnById.js","sources":["../../src/getServerFnById.ts"],"sourcesContent":["import { loadVirtualModule } from './loadVirtualModule'\nimport { VIRTUAL_MODULES } from './virtual-modules'\n\nexport async function getServerFnById(serverFnId: string) {\n  const { default: serverFnManifest } = await loadVirtualModule(\n    VIRTUAL_MODULES.serverFnManifest,\n  )\n\n  const serverFnInfo = serverFnManifest[serverFnId]\n\n  if (!serverFnInfo) {\n    console.info('serverFnManifest', serverFnManifest)\n    throw new Error('Server function info not found for ' + serverFnId)\n  }\n\n  const fnModule = await serverFnInfo.importer()\n\n  if (!fnModule) {\n    console.info('serverFnInfo', serverFnInfo)\n    throw new Error('Server function module not resolved for ' + serverFnId)\n  }\n\n  const action = fnModule[serverFnInfo.functionName]\n\n  if (!action) {\n    console.info('serverFnInfo', serverFnInfo)\n    console.info('fnModule', fnModule)\n    throw new Error(\n      `Server function module export not resolved for serverFn ID: ${serverFnId}`,\n    )\n  }\n  return action\n}\n"],"names":[],"mappings":";;AAGA,eAAsB,gBAAgB,YAAoB;AACxD,QAAM,EAAE,SAAS,iBAAA,IAAqB,MAAM;AAAA,IAC1C,gBAAgB;AAAA,EAAA;AAGlB,QAAM,eAAe,iBAAiB,UAAU;AAEhD,MAAI,CAAC,cAAc;AACjB,YAAQ,KAAK,oBAAoB,gBAAgB;AACjD,UAAM,IAAI,MAAM,wCAAwC,UAAU;AAAA,EACpE;AAEA,QAAM,WAAW,MAAM,aAAa,SAAA;AAEpC,MAAI,CAAC,UAAU;AACb,YAAQ,KAAK,gBAAgB,YAAY;AACzC,UAAM,IAAI,MAAM,6CAA6C,UAAU;AAAA,EACzE;AAEA,QAAM,SAAS,SAAS,aAAa,YAAY;AAEjD,MAAI,CAAC,QAAQ;AACX,YAAQ,KAAK,gBAAgB,YAAY;AACzC,YAAQ,KAAK,YAAY,QAAQ;AACjC,UAAM,IAAI;AAAA,MACR,+DAA+D,UAAU;AAAA,IAAA;AAAA,EAE7E;AACA,SAAO;AACT;"}